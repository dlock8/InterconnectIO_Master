<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>InterconnectIO Master: firmware/src/master.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">InterconnectIO Master
   &#160;<span id="projectnumber">700-2000-010</span>
   </div>
   <div id="projectbrief">Master Firmware to be loaded on the Pico Master device on InterconnectIO Board</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('master_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">master.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Main loop to control the Pico Master Device.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="master_8h_source.html">include/master.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;hardware/adc.h&quot;</code><br />
<code>#include &quot;hardware/i2c.h&quot;</code><br />
<code>#include &quot;hardware/uart.h&quot;</code><br />
<code>#include &quot;hardware/watchdog.h&quot;</code><br />
<code>#include &quot;<a class="el" href="fts__scpi_8h_source.html">include/fts_scpi.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="functadv_8h_source.html">include/functadv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="i2c__com_8h_source.html">include/i2c_com.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="test_8h_source.html">include/test.h</a>&quot;</code><br />
<code>#include &quot;lib/scpi-parser/libscpi/src/error.c&quot;</code><br />
<code>#include &quot;pico/binary_info.h&quot;</code><br />
<code>#include &quot;pico/stdlib.h&quot;</code><br />
<code>#include &quot;pico_lib2/src/dev/dev_24lc32/dev_24lc32.h&quot;</code><br />
<code>#include &quot;<a class="el" href="dev__ds2431_8h_source.html">pico_lib2/src/dev/dev_ds2431/dev_ds2431.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dev__ina219_8h_source.html">pico_lib2/src/dev/dev_ina219/dev_ina219.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dev__mcp4725_8h_source.html">pico_lib2/src/dev/dev_mcp4725/dev_mcp4725.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sys__adc_8h_source.html">pico_lib2/src/sys/include/sys_adc.h</a>&quot;</code><br />
<code>#include &quot;userconfig.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for master.c:</div>
<div class="dyncontent">
<div class="center"><img src="master_8c__incl.png" border="0" usemap="#afirmware_2src_2master_8c" alt=""/></div>
<map name="afirmware_2src_2master_8c" id="afirmware_2src_2master_8c">
<area shape="rect" title="Main loop to control the Pico Master Device." alt="" coords="1107,5,1269,32"/>
<area shape="rect" href="master_8h.html" title="Header file defining constants and macros used on the main file." alt="" coords="5,87,136,114"/>
<area shape="rect" title=" " alt="" coords="160,87,227,114"/>
<area shape="rect" title=" " alt="" coords="251,87,322,114"/>
<area shape="rect" title=" " alt="" coords="347,87,469,114"/>
<area shape="rect" title=" " alt="" coords="591,259,710,285"/>
<area shape="rect" title=" " alt="" coords="1293,87,1419,114"/>
<area shape="rect" title=" " alt="" coords="1443,87,1605,114"/>
<area shape="rect" href="fts__scpi_8h.html" title="Header file defining constants and macros used for SCPI interpreter." alt="" coords="1630,87,1765,114"/>
<area shape="rect" href="functadv_8h.html" title="Header file defining constants and macros for the complex function." alt="" coords="497,177,639,203"/>
<area shape="rect" href="i2c__com_8h.html" title="Header file defining constants and macros for internal i2c bus." alt="" coords="663,177,801,203"/>
<area shape="rect" href="test_8h.html" title="Header file defining constants and macros for buffer and message management." alt="" coords="1789,87,1899,114"/>
<area shape="rect" title=" " alt="" coords="1924,80,2084,121"/>
<area shape="rect" title=" " alt="" coords="2108,87,2247,114"/>
<area shape="rect" title=" " alt="" coords="2271,87,2372,114"/>
<area shape="rect" href="dev__24lc32_8h_source.html" title=" " alt="" coords="835,80,997,121"/>
<area shape="rect" href="dev__ds2431_8h.html" title="Header to perform communication with OneWire device." alt="" coords="2396,80,2567,121"/>
<area shape="rect" href="dev__ina219_8h.html" title=" " alt="" coords="646,80,810,121"/>
<area shape="rect" href="dev__mcp4725_8h.html" title="MCP4725 One Channel 12&#45;bit ADC." alt="" coords="1022,80,1218,121"/>
<area shape="rect" href="sys__adc_8h.html" title="Analog to Digital Converter Functions." alt="" coords="1199,169,1379,211"/>
<area shape="rect" title=" " alt="" coords="2591,87,2692,114"/>
<area shape="rect" title=" " alt="" coords="1652,177,1743,203"/>
<area shape="rect" title=" " alt="" coords="1101,259,1171,285"/>
<area shape="rect" title=" " alt="" coords="968,259,1051,285"/>
<area shape="rect" href="sys__i2c_8h.html" title="I2C Functions Module." alt="" coords="826,169,971,211"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structMESSAGE.html">MESSAGE</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure who contains the message to be sent on debug port.  <a href="structMESSAGE.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aeca90e1c1c62b70670514ffc18c9dfd4"><td class="memItemLeft" align="right" valign="top"><a id="aeca90e1c1c62b70670514ffc18c9dfd4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8c.html#aeca90e1c1c62b70670514ffc18c9dfd4">MESSAGE_SIZE</a>&#160;&#160;&#160;92</td></tr>
<tr class="memdesc:aeca90e1c1c62b70670514ffc18c9dfd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum size of message to be send on the USB port for debug. <br /></td></tr>
<tr class="separator:aeca90e1c1c62b70670514ffc18c9dfd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a142810068f1b99cd93d3fc9f0e160e02"><td class="memItemLeft" align="right" valign="top"><a id="a142810068f1b99cd93d3fc9f0e160e02"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8c.html#a142810068f1b99cd93d3fc9f0e160e02">QUEUE_SIZE</a>&#160;&#160;&#160;12</td></tr>
<tr class="memdesc:a142810068f1b99cd93d3fc9f0e160e02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum message received and not processed. <br /></td></tr>
<tr class="separator:a142810068f1b99cd93d3fc9f0e160e02"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac889aaa985ae67d7929dedde5c510d9c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8c.html#ac889aaa985ae67d7929dedde5c510d9c">enque</a> (<a class="el" href="structMESSAGE.html">MESSAGE</a> *message, char mess_size)</td></tr>
<tr class="memdesc:ac889aaa985ae67d7929dedde5c510d9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a message to the queue.  <a href="master_8c.html#ac889aaa985ae67d7929dedde5c510d9c">More...</a><br /></td></tr>
<tr class="separator:ac889aaa985ae67d7929dedde5c510d9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae733fe874122894bac75e1be37326ceb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8c.html#ae733fe874122894bac75e1be37326ceb">init_queue</a> ()</td></tr>
<tr class="memdesc:ae733fe874122894bac75e1be37326ceb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the circular queue.  <a href="master_8c.html#ae733fe874122894bac75e1be37326ceb">More...</a><br /></td></tr>
<tr class="separator:ae733fe874122894bac75e1be37326ceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d1ccfb6a786c332e10a4f2c8e8765c1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8c.html#a6d1ccfb6a786c332e10a4f2c8e8765c1">deque</a> (<a class="el" href="structMESSAGE.html">MESSAGE</a> *message, char *<a class="el" href="master_8c.html#aeac59056e9fe0881b3773cb2af260c41">size</a>)</td></tr>
<tr class="memdesc:a6d1ccfb6a786c332e10a4f2c8e8765c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a message from the front of the queue.  <a href="master_8c.html#a6d1ccfb6a786c332e10a4f2c8e8765c1">More...</a><br /></td></tr>
<tr class="separator:a6d1ccfb6a786c332e10a4f2c8e8765c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7fec5b2b07b712822dc8182d1796c22"><td class="memItemLeft" align="right" valign="top"><a id="ad7fec5b2b07b712822dc8182d1796c22"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8c.html#ad7fec5b2b07b712822dc8182d1796c22">on_uart_rx</a> ()</td></tr>
<tr class="memdesc:ad7fec5b2b07b712822dc8182d1796c22"><td class="mdescLeft">&#160;</td><td class="mdescRight">RX Main communication interrupt handler. <br /></td></tr>
<tr class="separator:ad7fec5b2b07b712822dc8182d1796c22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea68381afe044625867caa3e9d3d5836"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8c.html#aea68381afe044625867caa3e9d3d5836">init_main_com</a> ()</td></tr>
<tr class="memdesc:aea68381afe044625867caa3e9d3d5836"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialisation of the main communication uart (serial port) the SCPI command are received by the serial port. Baud rate is read from the Configuration EEPROM In case of error, default baud rate will be use.  <a href="master_8c.html#aea68381afe044625867caa3e9d3d5836">More...</a><br /></td></tr>
<tr class="separator:aea68381afe044625867caa3e9d3d5836"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f6549f2d2461465f770c1b277910225"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8c.html#a5f6549f2d2461465f770c1b277910225">Hardware_Default_Setting</a> ()</td></tr>
<tr class="memdesc:a5f6549f2d2461465f770c1b277910225"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the hardware to default settings.  <a href="master_8c.html#a5f6549f2d2461465f770c1b277910225">More...</a><br /></td></tr>
<tr class="separator:a5f6549f2d2461465f770c1b277910225"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:a840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Firmware for the Master Pico device running on interconnectIO board.  <a href="master_8c.html#a840291bc02cba5474a4cb46a9b9566fe">More...</a><br /></td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab0465a95499aab048b02601cd65e1ad6"><td class="memItemLeft" >struct {</td></tr>
<tr class="memitem:a5b0e5ee1346a7aedf98f44818fd3b6ca"><td class="memItemLeft" >
&#160;&#160;&#160;<a class="el" href="structMESSAGE.html">MESSAGE</a>&#160;&#160;&#160;<a class="el" href="master_8c.html#a212ceeefc46dd1a9604e02b868db2634">messages</a> [<a class="el" href="master_8c.html#a142810068f1b99cd93d3fc9f0e160e02">QUEUE_SIZE</a>]</td></tr>
<tr class="memdesc:a5b0e5ee1346a7aedf98f44818fd3b6ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of messages stored in the queue. <br /></td></tr>
<tr class="separator:a5b0e5ee1346a7aedf98f44818fd3b6ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93fd00c181b11b8a27334082ef94e19c"><td class="memItemLeft" >&#160;&#160;&#160;char&#160;&#160;&#160;<a class="el" href="master_8c.html#aeac59056e9fe0881b3773cb2af260c41">size</a> [<a class="el" href="master_8c.html#a142810068f1b99cd93d3fc9f0e160e02">QUEUE_SIZE</a>]</td></tr>
<tr class="separator:a93fd00c181b11b8a27334082ef94e19c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c9579b7b4f3322f922fef9239a78037"><td class="memItemLeft" >
&#160;&#160;&#160;int&#160;&#160;&#160;<a class="el" href="master_8c.html#a9320720f4d683cc7c76f800be700ac35">begin</a></td></tr>
<tr class="memdesc:a6c9579b7b4f3322f922fef9239a78037"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index of the first message in the queue. <br /></td></tr>
<tr class="separator:a6c9579b7b4f3322f922fef9239a78037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49af5c952a3885017a92652e26ff4114"><td class="memItemLeft" >
&#160;&#160;&#160;int&#160;&#160;&#160;<a class="el" href="master_8c.html#abce9f5dc9c83f2639b72024fdee5d388">end</a></td></tr>
<tr class="memdesc:a49af5c952a3885017a92652e26ff4114"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index where the next message will be added. <br /></td></tr>
<tr class="separator:a49af5c952a3885017a92652e26ff4114"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5affe851586e6b7652c25b33db4030f1"><td class="memItemLeft" >
&#160;&#160;&#160;int&#160;&#160;&#160;<a class="el" href="master_8c.html#a4ba74c1822743f8cac000c1eb4542510">current_load</a></td></tr>
<tr class="memdesc:a5affe851586e6b7652c25b33db4030f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current number of messages in the queue. <br /></td></tr>
<tr class="separator:a5affe851586e6b7652c25b33db4030f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0465a95499aab048b02601cd65e1ad6"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8c.html#ab0465a95499aab048b02601cd65e1ad6">queue</a></td></tr>
<tr class="memdesc:ab0465a95499aab048b02601cd65e1ad6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global circular queue for storing messages.  <a href="master_8c.html#ab0465a95499aab048b02601cd65e1ad6">More...</a><br /></td></tr>
<tr class="separator:ab0465a95499aab048b02601cd65e1ad6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac95ed0fd19288b8f4bf0824357dfab26"><td class="memItemLeft" align="right" valign="top"><a class="el" href="master_8h.html#a6ee16918c98b75fe7c46964a9b8c34ea">eep</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8c.html#ac95ed0fd19288b8f4bf0824357dfab26">ee</a></td></tr>
<tr class="memdesc:ac95ed0fd19288b8f4bf0824357dfab26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global variable representing the EEPROM data.  <a href="master_8c.html#ac95ed0fd19288b8f4bf0824357dfab26">More...</a><br /></td></tr>
<tr class="separator:ac95ed0fd19288b8f4bf0824357dfab26"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main loop to control the Pico Master Device. </p>
<dl class="section author"><dt>Author</dt><dd>Daniel Lockhead </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2024</dd></dl>
<p>The Master Pico is the main controller for the InterconnectIO Box. The master accept SCPI command the serial port and execute the command.</p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2024, D.Lockhead. All rights reserved.</dd></dl>
<p>This software is licensed under the BSD 3-Clause License. See the LICENSE file for more details. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6d1ccfb6a786c332e10a4f2c8e8765c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d1ccfb6a786c332e10a4f2c8e8765c1">&#9670;&nbsp;</a></span>deque()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool deque </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMESSAGE.html">MESSAGE</a> *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a message from the front of the queue. </p>
<p>This function dequeues a message from the circular queue if there is at least one message present. It retrieves the message and its size, resets the corresponding storage, and updates the <code>begin</code> index to point to the next message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>Pointer to the structure where the dequeued message will be stored. </td></tr>
    <tr><td class="paramname">size</td><td>Pointer to a variable where the size of the dequeued message will be stored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the message was successfully removed from the queue; false if the queue is empty. </dd></dl>

</div>
</div>
<a id="ac889aaa985ae67d7929dedde5c510d9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac889aaa985ae67d7929dedde5c510d9c">&#9670;&nbsp;</a></span>enque()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool enque </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMESSAGE.html">MESSAGE</a> *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>mess_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a message to the queue. </p>
<p>This function enqueues a message into a circular queue if there is space available. It updates the queue's <code>end</code> index and <code>current_load</code>, managing wrap-around when the queue reaches its maximum size.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>Pointer to the message to be enqueued. </td></tr>
    <tr><td class="paramname">mess_size</td><td>Size of the message to be enqueued.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the message was successfully added to the queue. </dd>
<dd>
false if the queue is full and the message could not be added. </dd></dl>

</div>
</div>
<a id="a5f6549f2d2461465f770c1b277910225"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f6549f2d2461465f770c1b277910225">&#9670;&nbsp;</a></span>Hardware_Default_Setting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Hardware_Default_Setting </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the hardware to default settings. </p>
<p>This function is called by the main program and when the SCPI command *RST is received. It sets up the necessary hardware configurations to ensure that the system starts in a known state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

</div>
</div>
<a id="aea68381afe044625867caa3e9d3d5836"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea68381afe044625867caa3e9d3d5836">&#9670;&nbsp;</a></span>init_main_com()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int init_main_com </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialisation of the main communication uart (serial port) the SCPI command are received by the serial port. Baud rate is read from the Configuration EEPROM In case of error, default baud rate will be use. </p>
<dl class="section return"><dt>Returns</dt><dd>int actual Baudrate </dd></dl>

</div>
</div>
<a id="ae733fe874122894bac75e1be37326ceb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae733fe874122894bac75e1be37326ceb">&#9670;&nbsp;</a></span>init_queue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_queue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the circular queue. </p>
<p>This function sets the <code>begin</code>, <code>end</code>, and <code>current_load</code> indices of the queue to zero, indicating that the queue is empty. It also clears the message storage by setting all entries to zero. </p>

</div>
</div>
<a id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840291bc02cba5474a4cb46a9b9566fe">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Firmware for the Master Pico device running on interconnectIO board. </p>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>
<p>refresh watchdog</p>
<p>counter for the heartbeat led</p>
<p>Flashing led</p>
<p>Heartbeat message on debug port</p>
<p>refresh watchdog</p>
<p>Never pass by here</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ac95ed0fd19288b8f4bf0824357dfab26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac95ed0fd19288b8f4bf0824357dfab26">&#9670;&nbsp;</a></span>ee</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="master_8h.html#a6ee16918c98b75fe7c46964a9b8c34ea">eep</a> ee</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Global variable representing the EEPROM data. </p>
<p>Instance of the EEPROM configuration union. </p>

</div>
</div>
<a id="ab0465a95499aab048b02601cd65e1ad6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0465a95499aab048b02601cd65e1ad6">&#9670;&nbsp;</a></span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }  queue</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Global circular queue for storing messages. </p>
<p>This variable manages a circular queue that holds messages and tracks their sizes. It uses indices to mark the beginning and end of the queue, and keeps track of the current number of messages (load). </p>

</div>
</div>
<a id="aeac59056e9fe0881b3773cb2af260c41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeac59056e9fe0881b3773cb2af260c41">&#9670;&nbsp;</a></span>size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char size[<a class="el" href="master_8c.html#a142810068f1b99cd93d3fc9f0e160e02">QUEUE_SIZE</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Array containing sizes of each message in the queue. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d9edf6c004b4a7ff14fe9ae7a92214ee.html">firmware</a></li><li class="navelem"><a class="el" href="dir_c898ccd6027d5da3247aa855d21ca2cf.html">src</a></li><li class="navelem"><a class="el" href="master_8c.html">master.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
