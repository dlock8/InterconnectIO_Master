<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>InterconnectIO Master: firmware/src/include/i2c_com.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">InterconnectIO Master
   &#160;<span id="projectnumber">700-2000-010</span>
   </div>
   <div id="projectbrief">Master Firmware to be loaded on the Pico Master device on InterconnectIO Board</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('i2c__com_8h_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">i2c_com.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="i2c__com_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#ifndef _I2C_COM_H_</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#define _I2C_COM_H_</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;hardware/i2c.h&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a63d6d9131789fc4dae83812b05644d61">   29</a></span>&#160;<span class="preprocessor">#define PICO_MASTER_ADDRESS       0x00       </span></div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#aca5737cdcceb494625a6f5e710ba784d">   30</a></span>&#160;<span class="preprocessor">#define PICO_PORT_ADDRESS         0x21       </span></div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a124a1e2b7f26772b4b857cbdb9dcf30f">   31</a></span>&#160;<span class="preprocessor">#define PICO_RELAY1_ADDRESS       0x22       </span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a1d0548d375517c164c3c5da807b04032">   32</a></span>&#160;<span class="preprocessor">#define PICO_RELAY2_ADDRESS       0x23       </span></div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a86781ac4a929c4e5aa12e362fafa09a5">   33</a></span>&#160;<span class="preprocessor">#define PICO_SELFTEST_ADDRESS     0x20       </span></div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a2306dddc82e5e58f23bd44c1086a5b6f">   35</a></span>&#160;<span class="preprocessor">#define REG_STATUS                100          </span></div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a31568ea8caf00a3ec699c01652c771d0">   37</a></span>&#160;<span class="preprocessor">#define I2C_BAUDRATE              100000       </span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a3adc009cb4006d7c62030e1dcac50ae0">   38</a></span>&#160;<span class="preprocessor">#define I2C_MASTER_SDA_PIN        20           </span></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a366a1fa7a2c467efa50d2ac5c7630d77">   39</a></span>&#160;<span class="preprocessor">#define I2C_MASTER_SCL_PIN        21           </span></div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a0607138f5019ed355b8eef0d8fad3ddf">   52</a></span>&#160;<span class="preprocessor">#define RBK {{0,1,2,3,4,5,6,7,0,1,2,3,4,5,6,7},\</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">{0,1,2,3,4,5,6,7,0,1,2,3,4,5,6,7}, \</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">{10,11,12,13,14,15,16,17,10,11,12,13,14,15,16,17}, \</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">{10,11,12,13,14,15,16,17,10,11,12,13,14,15,16,17}, }</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#ad7453096468d3a694c2504c219e4c410">   61</a></span>&#160;<span class="preprocessor">#define DIGP {{0,1,2,3,4,5,6,7}, \</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">{10,11,12,13,14,15,16,17}}</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a5851bcdc98143524932a84929ea1b973">   67</a></span>&#160;<span class="preprocessor">#define SE_BK1 19  </span></div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#aecddee9d879d98a417c44646c7a0e0c0">   68</a></span>&#160;<span class="preprocessor">#define SE_BK2 18  </span></div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#ab71dc955e08a5db9faab0ea0e5c21559">   69</a></span>&#160;<span class="preprocessor">#define SE_BK3 19  </span></div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a1582144c003eb26e9ebc5925c1b8b539">   70</a></span>&#160;<span class="preprocessor">#define SE_BK4 18  </span></div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#aeee1fd1c1a4d53067a27888f3aa109ec">   76</a></span>&#160;<span class="preprocessor">#define MJR_VERSION         01     </span></div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#abcd45341369f87e7ad5dfefee97c6811">   77</a></span>&#160;<span class="preprocessor">#define MIN_VERSION         02     </span></div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#ab299bf4053c6f010fa49f5868e042f8f">   78</a></span>&#160;<span class="preprocessor">#define OPEN_RELAY          10     </span></div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#ad0c1d69ed7b8e338ccc3fa3d2bf33a0f">   79</a></span>&#160;<span class="preprocessor">#define CLOSE_RELAY         11     </span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a12a325ef5d0749497223829873f3db9e">   80</a></span>&#160;<span class="preprocessor">#define OPEN_RELAY_BANK     12     </span></div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#aa36df15a89f69c0a67a42c2031a2cb40">   81</a></span>&#160;<span class="preprocessor">#define STATE_RELAY         15     </span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a202945ee08d725fa846599270268d154">   82</a></span>&#160;<span class="preprocessor">#define STATE_BANK          13     </span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a4e02aa8cc3590d67cdaf59c32bccce0e">   83</a></span>&#160;<span class="preprocessor">#define DIG_DIR_MASK        80     </span></div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a47cbe6aa8bb29c522f77e3377aa1130f">   84</a></span>&#160;<span class="preprocessor">#define DIG_OUT             81     </span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a2962c4e8456efd8622a5c52588ec8f3e">   85</a></span>&#160;<span class="preprocessor">#define DIG_IN              85     </span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#aa0b872892d78badc67de044ef10588b3">   86</a></span>&#160;<span class="preprocessor">#define DIR_GP_OUT          20     </span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a9b44f4f4ebf46c0721d2925bf281045c">   87</a></span>&#160;<span class="preprocessor">#define DIR_GP_IN           21     </span></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a2f97e36dfc89594e965aaaf8204a06b6">   88</a></span>&#160;<span class="preprocessor">#define DIR_GP_READ         25     </span></div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a1ead97d17801522a1480bda1fc32ee5d">   89</a></span>&#160;<span class="preprocessor">#define DIG_GP_OUT_CLEAR    10     </span></div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#ae1e575e1712c1339402511f3630fccb8">   90</a></span>&#160;<span class="preprocessor">#define DIG_GP_OUT_SET      11     </span></div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a3977185f7982ab30b399e11aa59d0ea2">   91</a></span>&#160;<span class="preprocessor">#define DIG_GP_IN           15     </span></div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#aa3ca6f0ba40e669a42d0a8c584d208d1">   92</a></span>&#160;<span class="preprocessor">#define GP_PAD_VALUE        60     </span></div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a9028970c06af818976fa3254b561ad65">   93</a></span>&#160;<span class="preprocessor">#define GP_PAD_SET          61     </span></div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#ac00b7a6baf8be105e152d544add23a73">   94</a></span>&#160;<span class="preprocessor">#define GP_PAD_READ         65     </span></div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#ac8563fd09b4ab43698a8336a2e9882d3">   95</a></span>&#160;<span class="preprocessor">#define GP_FUNCTION         75     </span></div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a6a5265b4c9a5a3ce117398b96d0b7afe">   96</a></span>&#160;<span class="preprocessor">#define SL_DEV_STATUS       100    </span></div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a23b054428daffe721add842778fc9343">   97</a></span>&#160;<span class="preprocessor">#define ENABLE_UART         101    </span></div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#aa7b4cea9e382d6e42801cb5e49c33737">   98</a></span>&#160;<span class="preprocessor">#define DISABLE_UART        102    </span></div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#af4ff12925b53847b6551d876446e81c6">   99</a></span>&#160;<span class="preprocessor">#define SET_UART_PROT       103    </span></div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#ab54bb853db038d92fdbc0c625fc381a8">  100</a></span>&#160;<span class="preprocessor">#define GET_UART_CFG        105    </span></div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#acc86cce8be4659d83da538b3ac82d3f7">  101</a></span>&#160;<span class="preprocessor">#define ENABLE_SPI          111    </span></div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#aaaa9972f541016fb5c92f0c67e4c135b">  102</a></span>&#160;<span class="preprocessor">#define DISABLE_SPI         112    </span></div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#afb8c995ba30a32e8b278dd2edd335d2c">  103</a></span>&#160;<span class="preprocessor">#define SET_SPI_CFG         113    </span></div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="i2c__com_8h.html#a15204e08a34b2b4525da4140b1af1d3b">  104</a></span>&#160;<span class="preprocessor">#define GET_SPI_CFG         115    </span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keywordtype">void</span> <a class="code" href="i2c__com_8h.html#a1e7d8ca7c172d2950dee50f279d07ec9">setup_master</a>();</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="i2c__com_8h.html#a3f9110484e69200a1424e98797a5e12e">send_master</a>(i2c_inst_t* i2c,uint8_t i2c_add,uint8_t cmd, uint16_t wdata, uint16_t *rback);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="i2c__com_8h.html#a6ab31ae372e2f5df7d1d2791fc42491a">relay_execute</a>(uint16_t *list,uint8_t action, uint16_t *answer);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="i2c__com_8h.html#a2dc087f9c9da6f696935dc364f9003e2">digital_execute</a>(uint8_t action, uint8_t port, uint8_t bit, uint8_t value, uint16_t *answer);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="i2c__com_8h.html#ab088f05e0e9346b5a3a4fa3a06a6c33b">gpio_execute</a>(uint8_t action, uint8_t device, uint8_t gpio, uint8_t value, uint16_t *answer);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="i2c__com_8h.html#a96f4bb6ce057649e766460dfecebc542">system_execute</a>(uint8_t action, uint16_t *answer);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// </span></div>
<div class="ttc" id="ai2c__com_8h_html_a1e7d8ca7c172d2950dee50f279d07ec9"><div class="ttname"><a href="i2c__com_8h.html#a1e7d8ca7c172d2950dee50f279d07ec9">setup_master</a></div><div class="ttdeci">void setup_master()</div><div class="ttdoc">Configuration of the internal I2C port.</div><div class="ttdef"><b>Definition:</b> i2c_com.c:32</div></div>
<div class="ttc" id="ai2c__com_8h_html_a2dc087f9c9da6f696935dc364f9003e2"><div class="ttname"><a href="i2c__com_8h.html#a2dc087f9c9da6f696935dc364f9003e2">digital_execute</a></div><div class="ttdeci">bool digital_execute(uint8_t action, uint8_t port, uint8_t bit, uint8_t value, uint16_t *answer)</div><div class="ttdoc">Function to execute the digital command to perform action on GPIO port located on pico slave1.</div><div class="ttdef"><b>Definition:</b> i2c_com.c:375</div></div>
<div class="ttc" id="ai2c__com_8h_html_a3f9110484e69200a1424e98797a5e12e"><div class="ttname"><a href="i2c__com_8h.html#a3f9110484e69200a1424e98797a5e12e">send_master</a></div><div class="ttdeci">bool send_master(i2c_inst_t *i2c, uint8_t i2c_add, uint8_t cmd, uint16_t wdata, uint16_t *rback)</div><div class="ttdoc">The function of the code is to read and write data on internal I2C port.</div><div class="ttdef"><b>Definition:</b> i2c_com.c:58</div></div>
<div class="ttc" id="ai2c__com_8h_html_a6ab31ae372e2f5df7d1d2791fc42491a"><div class="ttname"><a href="i2c__com_8h.html#a6ab31ae372e2f5df7d1d2791fc42491a">relay_execute</a></div><div class="ttdeci">bool relay_execute(uint16_t *list, uint8_t action, uint16_t *answer)</div><div class="ttdoc">From a list of relay (list) and the action to perform the sub will perform the action (close,...</div><div class="ttdef"><b>Definition:</b> i2c_com.c:102</div></div>
<div class="ttc" id="ai2c__com_8h_html_a96f4bb6ce057649e766460dfecebc542"><div class="ttname"><a href="i2c__com_8h.html#a96f4bb6ce057649e766460dfecebc542">system_execute</a></div><div class="ttdeci">bool system_execute(uint8_t action, uint16_t *answer)</div><div class="ttdoc">function to execute system command on Pico devices. The action is executed on all the Pico devices (1...</div><div class="ttdef"><b>Definition:</b> i2c_com.c:590</div></div>
<div class="ttc" id="ai2c__com_8h_html_ab088f05e0e9346b5a3a4fa3a06a6c33b"><div class="ttname"><a href="i2c__com_8h.html#ab088f05e0e9346b5a3a4fa3a06a6c33b">gpio_execute</a></div><div class="ttdeci">bool gpio_execute(uint8_t action, uint8_t device, uint8_t gpio, uint8_t value, uint16_t *answer)</div><div class="ttdoc">Function to execute action on GPIO bit.</div><div class="ttdef"><b>Definition:</b> i2c_com.c:474</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d9edf6c004b4a7ff14fe9ae7a92214ee.html">firmware</a></li><li class="navelem"><a class="el" href="dir_c898ccd6027d5da3247aa855d21ca2cf.html">src</a></li><li class="navelem"><a class="el" href="dir_f3d980ef16b1b8790ee40488bc452419.html">include</a></li><li class="navelem"><a class="el" href="i2c__com_8h.html">i2c_com.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
