<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>InterconnectIO_Master: firmware/src/pico_lib2/src/dev/dev_ina219/dev_ina219.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">InterconnectIO_Master<span id="projectnumber">&#160;700-2000-010</span>
   </div>
   <div id="projectbrief">Master Firmware to be loaded on the Pico Master device on InterconnectIO Board</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dev__ina219_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">dev_ina219.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Driver for the TI INA219 current/power monitor.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="dev__ina219_8h_source.html">dev_ina219.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for dev_ina219.c:</div>
<div class="dyncontent">
<div class="center"><img src="dev__ina219_8c__incl.png" border="0" usemap="#afirmware_2src_2pico__lib2_2src_2dev_2dev__ina219_2dev__ina219_8c" alt=""/></div>
<map name="afirmware_2src_2pico__lib2_2src_2dev_2dev__ina219_2dev__ina219_8c" id="afirmware_2src_2pico__lib2_2src_2dev_2dev__ina219_2dev__ina219_8c">
<area shape="rect" title="Driver for the TI INA219 current/power monitor." alt="" coords="52,5,232,61"/>
<area shape="rect" href="dev__ina219_8h.html" title=" " alt="" coords="87,109,197,136"/>
<area shape="rect" href="sys__i2c_8h.html" title="I2C Functions Module." alt="" coords="69,184,215,225"/>
<area shape="rect" title=" " alt="" coords="5,273,76,300"/>
<area shape="rect" title=" " alt="" coords="101,273,183,300"/>
<area shape="rect" title=" " alt="" coords="208,273,327,300"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af689fd46743cbb4d4453ff8a27141c4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev__ina219_8c.html#af689fd46743cbb4d4453ff8a27141c4a">ina219SetCalibration_32V_2A</a> (void)</td></tr>
<tr class="memdesc:af689fd46743cbb4d4453ff8a27141c4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures to INA219 to be able to measure up to 32V and 2A of current. Each unit of current corresponds to 100uA, and each unit of power corresponds to 2mW. Counter overflow occurs at 3.2A.  <a href="dev__ina219_8c.html#af689fd46743cbb4d4453ff8a27141c4a">More...</a><br /></td></tr>
<tr class="separator:af689fd46743cbb4d4453ff8a27141c4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13e153c23838f8402313939b9e090349"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev__ina219_8c.html#a13e153c23838f8402313939b9e090349">ina219SetCalibration_32V_1A</a> (void)</td></tr>
<tr class="memdesc:a13e153c23838f8402313939b9e090349"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures to INA219 to be able to measure up to 32V and 1A of current. Each unit of current corresponds to 40uA, and each unit of power corresponds to 800�W. Counter overflow occurs at 1.3A.  <a href="dev__ina219_8c.html#a13e153c23838f8402313939b9e090349">More...</a><br /></td></tr>
<tr class="separator:a13e153c23838f8402313939b9e090349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f3082d3ff4d3b02eeacde87f6508601"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev__ina219_8c.html#a0f3082d3ff4d3b02eeacde87f6508601">ina219SetCalibration_16V_500mA</a> (void)</td></tr>
<tr class="memdesc:a0f3082d3ff4d3b02eeacde87f6508601"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures to INA219 to be able to measure up to 16V and 500mA of current. Each unit of current corresponds to 25uA, and each unit of power corresponds to 500�W. Counter overflow occurs at 800mA.  <a href="dev__ina219_8c.html#a0f3082d3ff4d3b02eeacde87f6508601">More...</a><br /></td></tr>
<tr class="separator:a0f3082d3ff4d3b02eeacde87f6508601"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0555986238248c917cdd71076aa56417"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev__ina219_8c.html#a0555986238248c917cdd71076aa56417">ina219SetCalibration_16V_200mA</a> (void)</td></tr>
<tr class="memdesc:a0555986238248c917cdd71076aa56417"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures to INA219 to be able to measure up to 16V and 200mA of current. Each unit of current corresponds to 10uA, and each unit of power corresponds to 200�W. Counter overflow occurs at 327mA.  <a href="dev__ina219_8c.html#a0555986238248c917cdd71076aa56417">More...</a><br /></td></tr>
<tr class="separator:a0555986238248c917cdd71076aa56417"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1082efd7eef489c5ed57c7884eac570"><td class="memItemLeft" align="right" valign="top"><a id="ad1082efd7eef489c5ed57c7884eac570" name="ad1082efd7eef489c5ed57c7884eac570"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><b>ina219Init</b> (void)</td></tr>
<tr class="memdesc:ad1082efd7eef489c5ed57c7884eac570"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the I2C block. <br /></td></tr>
<tr class="separator:ad1082efd7eef489c5ed57c7884eac570"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dd812ec2d9030c7edaa1ea397d2c53e"><td class="memItemLeft" align="right" valign="top"><a id="a9dd812ec2d9030c7edaa1ea397d2c53e" name="a9dd812ec2d9030c7edaa1ea397d2c53e"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><b>ina219GetShuntVoltage</b> (void)</td></tr>
<tr class="memdesc:a9dd812ec2d9030c7edaa1ea397d2c53e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the shunt voltage (16-bit signed integer, so +-32767) <br /></td></tr>
<tr class="separator:a9dd812ec2d9030c7edaa1ea397d2c53e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a439f8a8e2a42bbe0ca5b2b48da9a1e80"><td class="memItemLeft" align="right" valign="top"><a id="a439f8a8e2a42bbe0ca5b2b48da9a1e80" name="a439f8a8e2a42bbe0ca5b2b48da9a1e80"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><b>ina219GetBusVoltage</b> (void)</td></tr>
<tr class="memdesc:a439f8a8e2a42bbe0ca5b2b48da9a1e80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the Bus voltage (16-bit signed integer, so +-32767) <br /></td></tr>
<tr class="separator:a439f8a8e2a42bbe0ca5b2b48da9a1e80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cc61b66b7d48f392e3f71196df47d16"><td class="memItemLeft" align="right" valign="top"><a id="a1cc61b66b7d48f392e3f71196df47d16" name="a1cc61b66b7d48f392e3f71196df47d16"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><b>ina219GetPower</b> (void)</td></tr>
<tr class="memdesc:a1cc61b66b7d48f392e3f71196df47d16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the raw power value (16-bit signed integer, so +-32767) <br /></td></tr>
<tr class="separator:a1cc61b66b7d48f392e3f71196df47d16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cecf583ae9c089a9e251c60c2ead1cd"><td class="memItemLeft" align="right" valign="top"><a id="a9cecf583ae9c089a9e251c60c2ead1cd" name="a9cecf583ae9c089a9e251c60c2ead1cd"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><b>ina219GetPower_mW</b> (void)</td></tr>
<tr class="memdesc:a9cecf583ae9c089a9e251c60c2ead1cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the power value in mW, taking into account the config settings and power LSB. <br /></td></tr>
<tr class="separator:a9cecf583ae9c089a9e251c60c2ead1cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6817c5f0df62fbc15d365d4278e9fedc"><td class="memItemLeft" align="right" valign="top"><a id="a6817c5f0df62fbc15d365d4278e9fedc" name="a6817c5f0df62fbc15d365d4278e9fedc"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><b>ina219GetCurrent</b> (void)</td></tr>
<tr class="memdesc:a6817c5f0df62fbc15d365d4278e9fedc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the raw current value (16-bit signed integer, so +-32767) <br /></td></tr>
<tr class="separator:a6817c5f0df62fbc15d365d4278e9fedc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8878cb36e1b8abff9203dfe682f3a067"><td class="memItemLeft" align="right" valign="top"><a id="a8878cb36e1b8abff9203dfe682f3a067" name="a8878cb36e1b8abff9203dfe682f3a067"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><b>ina219GetCurrent_mA</b> (void)</td></tr>
<tr class="memdesc:a8878cb36e1b8abff9203dfe682f3a067"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current value in mA, taking into account the config settings and current LSB. <br /></td></tr>
<tr class="separator:a8878cb36e1b8abff9203dfe682f3a067"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab897a88801b40429e32328c6ef29e410"><td class="memItemLeft" align="right" valign="top"><a id="ab897a88801b40429e32328c6ef29e410" name="ab897a88801b40429e32328c6ef29e410"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>ina219CalibrateCurrent_mA</b> (float ina219current, float meascurrent)</td></tr>
<tr class="memdesc:ab897a88801b40429e32328c6ef29e410"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the Corrected Full scale calibration based on measurement made by external Ampmeter. The new calibration value will be written the calibration register. <br /></td></tr>
<tr class="separator:ab897a88801b40429e32328c6ef29e410"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab1bcd28186de164efc41cc366368628e"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev__ina219_8c.html#ab1bcd28186de164efc41cc366368628e">ina219_currentDivider_mA</a> = 0</td></tr>
<tr class="separator:ab1bcd28186de164efc41cc366368628e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f1847658f37c1987b967057d6640871"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev__ina219_8c.html#a1f1847658f37c1987b967057d6640871">ina219_powerDivider_mW</a> = 0</td></tr>
<tr class="separator:a1f1847658f37c1987b967057d6640871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17c394eedef550e5d5a929136e14a3a0"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dev__ina219_8c.html#a17c394eedef550e5d5a929136e14a3a0">ina219_Calfactor</a> = 0</td></tr>
<tr class="separator:a17c394eedef550e5d5a929136e14a3a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Driver for the TI INA219 current/power monitor. </p>
<p >Modifications to improve INA219 functionality and optimization.</p>
<dl class="section author"><dt>Author</dt><dd>K. Townsend (microBuilder.eu)</dd></dl>
<h1><a class="anchor" id="DESCRIPTION"></a>
DESCRIPTION</h1>
<p >The INA219 is an I2C-based current/power monitor that monitors the voltage drop across a shunt resistor, as well as the supply voltage.</p>
<h1><a class="anchor" id="EXAMPLE"></a>
EXAMPLE</h1>
<div class="fragment"><div class="line"><a class="code hl_function" href="dev__ina219_8c.html#ad1082efd7eef489c5ed57c7884eac570">ina219Init</a>();</div>
<div class="line"> </div>
<div class="line">int16_t current = 0;</div>
<div class="line">int16_t power = 0;</div>
<div class="line">int16_t current_mA = 0;</div>
<div class="line">int16_t power_mW = 0;</div>
<div class="line">int16_t busvoltage = 0;</div>
<div class="line">int16_t shuntvoltage = 0;</div>
<div class="line">int16_t loadVoltage = 0;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">while</span>(1)</div>
<div class="line">{</div>
<div class="line">  shuntvoltage  = <a class="code hl_function" href="dev__ina219_8c.html#a9dd812ec2d9030c7edaa1ea397d2c53e">ina219GetShuntVoltage</a>();</div>
<div class="line">  busvoltage    = <a class="code hl_function" href="dev__ina219_8c.html#a439f8a8e2a42bbe0ca5b2b48da9a1e80">ina219GetBusVoltage</a>();</div>
<div class="line">  power         = <a class="code hl_function" href="dev__ina219_8c.html#a1cc61b66b7d48f392e3f71196df47d16">ina219GetPower</a>();</div>
<div class="line">  current       = <a class="code hl_function" href="dev__ina219_8c.html#a6817c5f0df62fbc15d365d4278e9fedc">ina219GetCurrent</a>();</div>
<div class="line">  power_mW      = <a class="code hl_function" href="dev__ina219_8c.html#a9cecf583ae9c089a9e251c60c2ead1cd">ina219GetPower_mW</a>();</div>
<div class="line">  current_mA    = <a class="code hl_function" href="dev__ina219_8c.html#a8878cb36e1b8abff9203dfe682f3a067">ina219GetCurrent_mA</a>();</div>
<div class="line">  loadVoltage   = busvoltage + (shuntvoltage / 100);</div>
<div class="line">  printf(<span class="stringliteral">&quot;%-15s %6d = %d.%dmV (%duV) \r\n&quot;</span>, <span class="stringliteral">&quot;Shunt Voltage:&quot;</span>, shuntvoltage, shuntvoltage / 100, shuntvoltage % 100, shuntvoltage * 10);</div>
<div class="line">  printf(<span class="stringliteral">&quot;%-15s %6d = %d.%dV \r\n&quot;</span>,         <span class="stringliteral">&quot;Bus Voltage:&quot;</span>,   busvoltage, busvoltage / 1000, busvoltage % 1000);</div>
<div class="line">  printf(<span class="stringliteral">&quot;%-15s %6d = %d.%dV \r\n&quot;</span>,         <span class="stringliteral">&quot;Load Voltage:&quot;</span>,  loadVoltage, loadVoltage / 1000, loadVoltage % 1000);</div>
<div class="line">  printf(<span class="stringliteral">&quot;%-15s %6d = %dmW \r\n&quot;</span>,           <span class="stringliteral">&quot;Power:&quot;</span>,         power, power_mW);</div>
<div class="line">  printf(<span class="stringliteral">&quot;%-15s %6d = %dmA \r\n&quot;</span>,           <span class="stringliteral">&quot;Current:&quot;</span>,       current, current_mA);</div>
<div class="line">  printf(<span class="stringliteral">&quot;\r\n&quot;</span>);</div>
<div class="line">  systickDelay(5000);</div>
<div class="line">}</div>
<div class="ttc" id="adev__ina219_8c_html_a1cc61b66b7d48f392e3f71196df47d16"><div class="ttname"><a href="dev__ina219_8c.html#a1cc61b66b7d48f392e3f71196df47d16">ina219GetPower</a></div><div class="ttdeci">int16_t ina219GetPower(void)</div><div class="ttdoc">Gets the raw power value (16-bit signed integer, so +-32767)</div><div class="ttdef"><b>Definition:</b> dev_ina219.c:520</div></div>
<div class="ttc" id="adev__ina219_8c_html_a439f8a8e2a42bbe0ca5b2b48da9a1e80"><div class="ttname"><a href="dev__ina219_8c.html#a439f8a8e2a42bbe0ca5b2b48da9a1e80">ina219GetBusVoltage</a></div><div class="ttdeci">int16_t ina219GetBusVoltage(void)</div><div class="ttdoc">Gets the Bus voltage (16-bit signed integer, so +-32767)</div><div class="ttdef"><b>Definition:</b> dev_ina219.c:507</div></div>
<div class="ttc" id="adev__ina219_8c_html_a6817c5f0df62fbc15d365d4278e9fedc"><div class="ttname"><a href="dev__ina219_8c.html#a6817c5f0df62fbc15d365d4278e9fedc">ina219GetCurrent</a></div><div class="ttdeci">int16_t ina219GetCurrent(void)</div><div class="ttdoc">Gets the raw current value (16-bit signed integer, so +-32767)</div><div class="ttdef"><b>Definition:</b> dev_ina219.c:545</div></div>
<div class="ttc" id="adev__ina219_8c_html_a8878cb36e1b8abff9203dfe682f3a067"><div class="ttname"><a href="dev__ina219_8c.html#a8878cb36e1b8abff9203dfe682f3a067">ina219GetCurrent_mA</a></div><div class="ttdeci">int16_t ina219GetCurrent_mA(void)</div><div class="ttdoc">Gets the current value in mA, taking into account the config settings and current LSB.</div><div class="ttdef"><b>Definition:</b> dev_ina219.c:563</div></div>
<div class="ttc" id="adev__ina219_8c_html_a9cecf583ae9c089a9e251c60c2ead1cd"><div class="ttname"><a href="dev__ina219_8c.html#a9cecf583ae9c089a9e251c60c2ead1cd">ina219GetPower_mW</a></div><div class="ttdeci">int16_t ina219GetPower_mW(void)</div><div class="ttdoc">Gets the power value in mW, taking into account the config settings and power LSB.</div><div class="ttdef"><b>Definition:</b> dev_ina219.c:533</div></div>
<div class="ttc" id="adev__ina219_8c_html_a9dd812ec2d9030c7edaa1ea397d2c53e"><div class="ttname"><a href="dev__ina219_8c.html#a9dd812ec2d9030c7edaa1ea397d2c53e">ina219GetShuntVoltage</a></div><div class="ttdeci">int16_t ina219GetShuntVoltage(void)</div><div class="ttdoc">Gets the shunt voltage (16-bit signed integer, so +-32767)</div><div class="ttdef"><b>Definition:</b> dev_ina219.c:495</div></div>
<div class="ttc" id="adev__ina219_8c_html_ad1082efd7eef489c5ed57c7884eac570"><div class="ttname"><a href="dev__ina219_8c.html#ad1082efd7eef489c5ed57c7884eac570">ina219Init</a></div><div class="ttdeci">int16_t ina219Init(void)</div><div class="ttdoc">Initialises the I2C block.</div><div class="ttdef"><b>Definition:</b> dev_ina219.c:475</div></div>
</div><!-- fragment --><h1><a class="anchor" id="LICENSE"></a>
LICENSE</h1>
<p >Software License Agreement (BSD License)</p>
<p >Copyright (c) 2012 Kevin Townsend All rights reserved.</p>
<p >Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p><ol type="1">
<li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</li>
<li>Neither the name of the copyright holders nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</li>
</ol>
<p >THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
<dl class="section author"><dt>Author</dt><dd>Daniel Lockhead </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2024</dd></dl>
<h1><a class="anchor" id="MODIFICATIONS"></a>
MODIFICATIONS</h1>
<ul>
<li>Return current = 0 if current is negative on ina219GetCurrent_mA</li>
<li>Add function ina219CalibrateCurrent_mA to perform calibration from know value </li>
</ul>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a0555986238248c917cdd71076aa56417" name="a0555986238248c917cdd71076aa56417"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0555986238248c917cdd71076aa56417">&#9670;&nbsp;</a></span>ina219SetCalibration_16V_200mA()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ina219SetCalibration_16V_200mA </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures to INA219 to be able to measure up to 16V and 200mA of current. Each unit of current corresponds to 10uA, and each unit of power corresponds to 200�W. Counter overflow occurs at 327mA. </p>
<dl class="section note"><dt>Note</dt><dd>These calculations assume a 0.1 ohm resistor is present </dd></dl>

</div>
</div>
<a id="a0f3082d3ff4d3b02eeacde87f6508601" name="a0f3082d3ff4d3b02eeacde87f6508601"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f3082d3ff4d3b02eeacde87f6508601">&#9670;&nbsp;</a></span>ina219SetCalibration_16V_500mA()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ina219SetCalibration_16V_500mA </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures to INA219 to be able to measure up to 16V and 500mA of current. Each unit of current corresponds to 25uA, and each unit of power corresponds to 500�W. Counter overflow occurs at 800mA. </p>
<dl class="section note"><dt>Note</dt><dd>These calculations assume a 0.1 ohm resistor is present </dd></dl>

</div>
</div>
<a id="a13e153c23838f8402313939b9e090349" name="a13e153c23838f8402313939b9e090349"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13e153c23838f8402313939b9e090349">&#9670;&nbsp;</a></span>ina219SetCalibration_32V_1A()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ina219SetCalibration_32V_1A </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures to INA219 to be able to measure up to 32V and 1A of current. Each unit of current corresponds to 40uA, and each unit of power corresponds to 800�W. Counter overflow occurs at 1.3A. </p>
<dl class="section note"><dt>Note</dt><dd>These calculations assume a 0.1 ohm resistor is present </dd></dl>

</div>
</div>
<a id="af689fd46743cbb4d4453ff8a27141c4a" name="af689fd46743cbb4d4453ff8a27141c4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af689fd46743cbb4d4453ff8a27141c4a">&#9670;&nbsp;</a></span>ina219SetCalibration_32V_2A()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ina219SetCalibration_32V_2A </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures to INA219 to be able to measure up to 32V and 2A of current. Each unit of current corresponds to 100uA, and each unit of power corresponds to 2mW. Counter overflow occurs at 3.2A. </p>
<dl class="section note"><dt>Note</dt><dd>These calculations assume a 0.1 ohm resistor is present </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a17c394eedef550e5d5a929136e14a3a0" name="a17c394eedef550e5d5a929136e14a3a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17c394eedef550e5d5a929136e14a3a0">&#9670;&nbsp;</a></span>ina219_Calfactor</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t ina219_Calfactor = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Default calibration factor for INA219 </p>

</div>
</div>
<a id="ab1bcd28186de164efc41cc366368628e" name="ab1bcd28186de164efc41cc366368628e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1bcd28186de164efc41cc366368628e">&#9670;&nbsp;</a></span>ina219_currentDivider_mA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t ina219_currentDivider_mA = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Multiplier for converting raw current values to milliamps (mA) </p>

</div>
</div>
<a id="a1f1847658f37c1987b967057d6640871" name="a1f1847658f37c1987b967057d6640871"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f1847658f37c1987b967057d6640871">&#9670;&nbsp;</a></span>ina219_powerDivider_mW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t ina219_powerDivider_mW = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Multiplier for converting raw power values to milliwatts (mW) </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d9edf6c004b4a7ff14fe9ae7a92214ee.html">firmware</a></li><li class="navelem"><a class="el" href="dir_c898ccd6027d5da3247aa855d21ca2cf.html">src</a></li><li class="navelem"><a class="el" href="dir_c747166fb4b65eb7713aba04915cf78c.html">pico_lib2</a></li><li class="navelem"><a class="el" href="dir_735d5cd2859a92a6d89deccca6d7687c.html">src</a></li><li class="navelem"><a class="el" href="dir_768e551e890406b5500c0739256868b1.html">dev</a></li><li class="navelem"><a class="el" href="dir_0bedef6754f5d63985ae484e965cc095.html">dev_ina219</a></li><li class="navelem"><a class="el" href="dev__ina219_8c.html">dev_ina219.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
