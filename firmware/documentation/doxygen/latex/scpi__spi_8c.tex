\hypertarget{scpi__spi_8c}{}\doxysection{firmware/src/scpi\+\_\+spi.c File Reference}
\label{scpi__spi_8c}\index{firmware/src/scpi\_spi.c@{firmware/src/scpi\_spi.c}}


Complete software code library to communicate to the user SPI port using SCPI command.  


{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$ctype.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include \char`\"{}pico/stdlib.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}hardware/spi.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}include/scpi\+\_\+spi.\+h\char`\"{}}\newline
Include dependency graph for scpi\+\_\+spi.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{scpi__spi_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structuser__spi}{user\+\_\+spi}}
\begin{DoxyCompactList}\small\item\em structure to contents the parameters of the user SPI \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{scpi__spi_8c_a1c9cd652cc58e98115393248b95185cb}{scpi\+\_\+spi\+\_\+enable}} ()
\begin{DoxyCompactList}\small\item\em function to configure the parameters of the user spi based on the data set on the spi structure \end{DoxyCompactList}\item 
\mbox{\Hypertarget{scpi__spi_8c_a7d19d25392ca2572735f7f2012400f9b}\label{scpi__spi_8c_a7d19d25392ca2572735f7f2012400f9b}} 
void {\bfseries scpi\+\_\+spi\+\_\+disable} ()
\begin{DoxyCompactList}\small\item\em function to disable the user spi and configure pins reserved by SPI to normal GPIO, set as input. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{scpi__spi_8c_a0464322f4228d85608e432eb2f104536}{scpi\+\_\+spi\+\_\+status}} ()
\begin{DoxyCompactList}\small\item\em Function who return if the user spi is enabled or not. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{scpi__spi_8c_a659466f5c52b4fd694f38c989d294af8}{scpi\+\_\+spi\+\_\+set\+\_\+baudrate}} (uint32\+\_\+t speed)
\begin{DoxyCompactList}\small\item\em Function to update the baudrate speed on the structure, Baudrate will be updated with function spi enable. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{scpi__spi_8c_a87b874a337212219c48b1e44ffc77f5e}{scpi\+\_\+spi\+\_\+get\+\_\+baudrate}} ()
\begin{DoxyCompactList}\small\item\em function to return the baudrate \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{scpi__spi_8c_aa0920b1ae2abba44bee0a9b320cca227}{scpi\+\_\+spi\+\_\+set\+\_\+chipselect}} (uint32\+\_\+t num)
\begin{DoxyCompactList}\small\item\em Function to update the SPI Chip\+Select to be used. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{scpi__spi_8c_a9bdabaa83862186b19d30d6a128d2a61}{scpi\+\_\+spi\+\_\+get\+\_\+chipselect}} ()
\begin{DoxyCompactList}\small\item\em function to return the chipselect gpio used \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{scpi__spi_8c_a2cb5079bd0fb6a96093c5f37f4572fd8}{scpi\+\_\+spi\+\_\+set\+\_\+databits}} (uint32\+\_\+t num)
\begin{DoxyCompactList}\small\item\em Function to update the value of databits to be used. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{scpi__spi_8c_a8f589a72b8492383e5f3b56566c7865c}{scpi\+\_\+spi\+\_\+get\+\_\+databits}} ()
\begin{DoxyCompactList}\small\item\em function to return the databits value saved on structure \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{scpi__spi_8c_ac54dd17786f3ac8a65578d6cd470c1fe}{scpi\+\_\+spi\+\_\+set\+\_\+mode}} (uint8\+\_\+t mode)
\begin{DoxyCompactList}\small\item\em function to set the mode to use for spi communication \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{scpi__spi_8c_a0aad5a09bc2566f47180bf939d77ba2f}{scpi\+\_\+spi\+\_\+get\+\_\+mode}} ()
\begin{DoxyCompactList}\small\item\em function who return the spi mode used in communication. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{scpi__spi_8c_a23385f64b89a24238ba50379892ed47a}{spi\+\_\+bytes\+\_\+to\+\_\+words}} (uint8\+\_\+t $\ast$byte\+\_\+array, uint16\+\_\+t $\ast$word\+\_\+array, size\+\_\+t length)
\begin{DoxyCompactList}\small\item\em function who transform an array of bytes to an array of words. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{scpi__spi_8c_a1a49534552d094cd1e724ab8940c035a}{spi\+\_\+words\+\_\+to\+\_\+bytes}} (uint16\+\_\+t $\ast$word\+\_\+array, uint8\+\_\+t $\ast$byte\+\_\+array, size\+\_\+t length)
\begin{DoxyCompactList}\small\item\em function who transform an array of word to an array of byte \end{DoxyCompactList}\item 
int64\+\_\+t \mbox{\hyperlink{scpi__spi_8c_a9564c7386c74b91ace471ec614fddbb4}{spi\+\_\+alert\+\_\+function}} (alarm\+\_\+id\+\_\+t id, void $\ast$user\+\_\+data)
\begin{DoxyCompactList}\small\item\em Callback function triggered by an alarm to handle SPI timeout. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{scpi__spi_8c_afdc3b187e4cf666ab0e6ebb4d6b17460}{scpi\+\_\+spi\+\_\+wri\+\_\+read\+\_\+data}} (uint8\+\_\+t $\ast$wdata, uint8\+\_\+t wlen, uint8\+\_\+t $\ast$rdata, uint8\+\_\+t rlen, bool $\ast$wflag)
\begin{DoxyCompactList}\small\item\em main function called by SCPI command to send or receive data on SPI port \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structuser__spi}{user\+\_\+spi}} \mbox{\hyperlink{scpi__spi_8c_a44e7e147692731d6817d00c1a204c8ab}{uspi}}
\begin{DoxyCompactList}\small\item\em Global SPI configuration structure initialized with default values. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{scpi__spi_8c_a4bb6e704374ee61be159c9dd4e5976b7}{spi\+\_\+timeout}} = false
\begin{DoxyCompactList}\small\item\em Global flag indicating whether an SPI timeout has occurred. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Complete software code library to communicate to the user SPI port using SCPI command. 

\begin{DoxyAuthor}{Author}
Daniel Lockhead 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2024
\end{DoxyDate}
This software setup and control the communication of the SPI port. Each SCPI command related to SPI port is handled by this software.

\begin{DoxyCopyright}{Copyright}
Copyright (c) 2024, D.\+Lockhead. All rights reserved.
\end{DoxyCopyright}
This software is licensed under the BSD 3-\/Clause License. See the LICENSE file for more details. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{scpi__spi_8c_a1c9cd652cc58e98115393248b95185cb}\label{scpi__spi_8c_a1c9cd652cc58e98115393248b95185cb}} 
\index{scpi\_spi.c@{scpi\_spi.c}!scpi\_spi\_enable@{scpi\_spi\_enable}}
\index{scpi\_spi\_enable@{scpi\_spi\_enable}!scpi\_spi.c@{scpi\_spi.c}}
\doxysubsubsection{\texorpdfstring{scpi\_spi\_enable()}{scpi\_spi\_enable()}}
{\footnotesize\ttfamily void scpi\+\_\+spi\+\_\+enable (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



function to configure the parameters of the user spi based on the data set on the spi structure 

\texorpdfstring{$<$}{<} Configure the gpio who will be used as chipselect

\texorpdfstring{$<$}{<} set to high by default\mbox{\Hypertarget{scpi__spi_8c_a87b874a337212219c48b1e44ffc77f5e}\label{scpi__spi_8c_a87b874a337212219c48b1e44ffc77f5e}} 
\index{scpi\_spi.c@{scpi\_spi.c}!scpi\_spi\_get\_baudrate@{scpi\_spi\_get\_baudrate}}
\index{scpi\_spi\_get\_baudrate@{scpi\_spi\_get\_baudrate}!scpi\_spi.c@{scpi\_spi.c}}
\doxysubsubsection{\texorpdfstring{scpi\_spi\_get\_baudrate()}{scpi\_spi\_get\_baudrate()}}
{\footnotesize\ttfamily uint32\+\_\+t scpi\+\_\+spi\+\_\+get\+\_\+baudrate (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



function to return the baudrate 

\begin{DoxyReturn}{Returns}
uint32\+\_\+t baudrate 
\end{DoxyReturn}
\mbox{\Hypertarget{scpi__spi_8c_a9bdabaa83862186b19d30d6a128d2a61}\label{scpi__spi_8c_a9bdabaa83862186b19d30d6a128d2a61}} 
\index{scpi\_spi.c@{scpi\_spi.c}!scpi\_spi\_get\_chipselect@{scpi\_spi\_get\_chipselect}}
\index{scpi\_spi\_get\_chipselect@{scpi\_spi\_get\_chipselect}!scpi\_spi.c@{scpi\_spi.c}}
\doxysubsubsection{\texorpdfstring{scpi\_spi\_get\_chipselect()}{scpi\_spi\_get\_chipselect()}}
{\footnotesize\ttfamily uint32\+\_\+t scpi\+\_\+spi\+\_\+get\+\_\+chipselect (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



function to return the chipselect gpio used 

\begin{DoxyReturn}{Returns}
uint32\+\_\+t gpio 
\end{DoxyReturn}
\mbox{\Hypertarget{scpi__spi_8c_a8f589a72b8492383e5f3b56566c7865c}\label{scpi__spi_8c_a8f589a72b8492383e5f3b56566c7865c}} 
\index{scpi\_spi.c@{scpi\_spi.c}!scpi\_spi\_get\_databits@{scpi\_spi\_get\_databits}}
\index{scpi\_spi\_get\_databits@{scpi\_spi\_get\_databits}!scpi\_spi.c@{scpi\_spi.c}}
\doxysubsubsection{\texorpdfstring{scpi\_spi\_get\_databits()}{scpi\_spi\_get\_databits()}}
{\footnotesize\ttfamily uint32\+\_\+t scpi\+\_\+spi\+\_\+get\+\_\+databits (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



function to return the databits value saved on structure 

\begin{DoxyReturn}{Returns}
uint32\+\_\+t databits 
\end{DoxyReturn}
\mbox{\Hypertarget{scpi__spi_8c_a0aad5a09bc2566f47180bf939d77ba2f}\label{scpi__spi_8c_a0aad5a09bc2566f47180bf939d77ba2f}} 
\index{scpi\_spi.c@{scpi\_spi.c}!scpi\_spi\_get\_mode@{scpi\_spi\_get\_mode}}
\index{scpi\_spi\_get\_mode@{scpi\_spi\_get\_mode}!scpi\_spi.c@{scpi\_spi.c}}
\doxysubsubsection{\texorpdfstring{scpi\_spi\_get\_mode()}{scpi\_spi\_get\_mode()}}
{\footnotesize\ttfamily uint8\+\_\+t scpi\+\_\+spi\+\_\+get\+\_\+mode (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



function who return the spi mode used in communication. 

\begin{DoxyReturn}{Returns}
uint8\+\_\+t mode value 
\end{DoxyReturn}
\texorpdfstring{$<$}{<} return value saved in structure\mbox{\Hypertarget{scpi__spi_8c_a659466f5c52b4fd694f38c989d294af8}\label{scpi__spi_8c_a659466f5c52b4fd694f38c989d294af8}} 
\index{scpi\_spi.c@{scpi\_spi.c}!scpi\_spi\_set\_baudrate@{scpi\_spi\_set\_baudrate}}
\index{scpi\_spi\_set\_baudrate@{scpi\_spi\_set\_baudrate}!scpi\_spi.c@{scpi\_spi.c}}
\doxysubsubsection{\texorpdfstring{scpi\_spi\_set\_baudrate()}{scpi\_spi\_set\_baudrate()}}
{\footnotesize\ttfamily void scpi\+\_\+spi\+\_\+set\+\_\+baudrate (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{speed }\end{DoxyParamCaption})}



Function to update the baudrate speed on the structure, Baudrate will be updated with function spi enable. 


\begin{DoxyParams}{Parameters}
{\em speed} & Baudrate to save on structure \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{scpi__spi_8c_aa0920b1ae2abba44bee0a9b320cca227}\label{scpi__spi_8c_aa0920b1ae2abba44bee0a9b320cca227}} 
\index{scpi\_spi.c@{scpi\_spi.c}!scpi\_spi\_set\_chipselect@{scpi\_spi\_set\_chipselect}}
\index{scpi\_spi\_set\_chipselect@{scpi\_spi\_set\_chipselect}!scpi\_spi.c@{scpi\_spi.c}}
\doxysubsubsection{\texorpdfstring{scpi\_spi\_set\_chipselect()}{scpi\_spi\_set\_chipselect()}}
{\footnotesize\ttfamily uint8\+\_\+t scpi\+\_\+spi\+\_\+set\+\_\+chipselect (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{num }\end{DoxyParamCaption})}



Function to update the SPI Chip\+Select to be used. 


\begin{DoxyParams}{Parameters}
{\em num} & gpio to write \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
uint8\+\_\+t error if number is not valid baudrate 
\end{DoxyReturn}
\texorpdfstring{$<$}{<} Loop to determine if the gpio required for become new Chip\+Select is valid

\texorpdfstring{$<$}{<} save in structure the new gpio

\texorpdfstring{$<$}{<} Configure the gpio who will be used as chipselect

\texorpdfstring{$<$}{<} set to high by default\mbox{\Hypertarget{scpi__spi_8c_a2cb5079bd0fb6a96093c5f37f4572fd8}\label{scpi__spi_8c_a2cb5079bd0fb6a96093c5f37f4572fd8}} 
\index{scpi\_spi.c@{scpi\_spi.c}!scpi\_spi\_set\_databits@{scpi\_spi\_set\_databits}}
\index{scpi\_spi\_set\_databits@{scpi\_spi\_set\_databits}!scpi\_spi.c@{scpi\_spi.c}}
\doxysubsubsection{\texorpdfstring{scpi\_spi\_set\_databits()}{scpi\_spi\_set\_databits()}}
{\footnotesize\ttfamily uint8\+\_\+t scpi\+\_\+spi\+\_\+set\+\_\+databits (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{num }\end{DoxyParamCaption})}



Function to update the value of databits to be used. 


\begin{DoxyParams}{Parameters}
{\em num} & Databits to write \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{scpi__spi_8c_ac54dd17786f3ac8a65578d6cd470c1fe}\label{scpi__spi_8c_ac54dd17786f3ac8a65578d6cd470c1fe}} 
\index{scpi\_spi.c@{scpi\_spi.c}!scpi\_spi\_set\_mode@{scpi\_spi\_set\_mode}}
\index{scpi\_spi\_set\_mode@{scpi\_spi\_set\_mode}!scpi\_spi.c@{scpi\_spi.c}}
\doxysubsubsection{\texorpdfstring{scpi\_spi\_set\_mode()}{scpi\_spi\_set\_mode()}}
{\footnotesize\ttfamily uint8\+\_\+t scpi\+\_\+spi\+\_\+set\+\_\+mode (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{mode }\end{DoxyParamCaption})}



function to set the mode to use for spi communication 


\begin{DoxyParams}{Parameters}
{\em mode} & value of mode to use \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
uint8\+\_\+t error number 
\end{DoxyReturn}
\texorpdfstring{$<$}{<} save mode used in structure

\texorpdfstring{$<$}{<} set format\mbox{\Hypertarget{scpi__spi_8c_a0464322f4228d85608e432eb2f104536}\label{scpi__spi_8c_a0464322f4228d85608e432eb2f104536}} 
\index{scpi\_spi.c@{scpi\_spi.c}!scpi\_spi\_status@{scpi\_spi\_status}}
\index{scpi\_spi\_status@{scpi\_spi\_status}!scpi\_spi.c@{scpi\_spi.c}}
\doxysubsubsection{\texorpdfstring{scpi\_spi\_status()}{scpi\_spi\_status()}}
{\footnotesize\ttfamily bool scpi\+\_\+spi\+\_\+status (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Function who return if the user spi is enabled or not. 

\begin{DoxyReturn}{Returns}
True if spi is enabled 
\end{DoxyReturn}
\mbox{\Hypertarget{scpi__spi_8c_afdc3b187e4cf666ab0e6ebb4d6b17460}\label{scpi__spi_8c_afdc3b187e4cf666ab0e6ebb4d6b17460}} 
\index{scpi\_spi.c@{scpi\_spi.c}!scpi\_spi\_wri\_read\_data@{scpi\_spi\_wri\_read\_data}}
\index{scpi\_spi\_wri\_read\_data@{scpi\_spi\_wri\_read\_data}!scpi\_spi.c@{scpi\_spi.c}}
\doxysubsubsection{\texorpdfstring{scpi\_spi\_wri\_read\_data()}{scpi\_spi\_wri\_read\_data()}}
{\footnotesize\ttfamily uint8\+\_\+t scpi\+\_\+spi\+\_\+wri\+\_\+read\+\_\+data (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{wdata,  }\item[{uint8\+\_\+t}]{wlen,  }\item[{uint8\+\_\+t $\ast$}]{rdata,  }\item[{uint8\+\_\+t}]{rlen,  }\item[{bool $\ast$}]{wflag }\end{DoxyParamCaption})}



main function called by SCPI command to send or receive data on SPI port 


\begin{DoxyParams}{Parameters}
{\em wdata} & Pointer to an array of data to write \\
\hline
{\em wlen} & contain length of the write array \\
\hline
{\em rdata} & Pointer who will contains the data read \\
\hline
{\em rlen} & contain length of the read array \\
\hline
{\em wflag} & Flag to define if we process bytes size or word size \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
uint8\+\_\+t error code 
\end{DoxyReturn}
\texorpdfstring{$<$}{<} bytes command

\texorpdfstring{$<$}{<} word command

\texorpdfstring{$<$}{<} bytes command

\texorpdfstring{$<$}{<} word command

\texorpdfstring{$<$}{<} bytes command

\texorpdfstring{$<$}{<} word command

\texorpdfstring{$<$}{<} set flag to determine size of data read\mbox{\Hypertarget{scpi__spi_8c_a9564c7386c74b91ace471ec614fddbb4}\label{scpi__spi_8c_a9564c7386c74b91ace471ec614fddbb4}} 
\index{scpi\_spi.c@{scpi\_spi.c}!spi\_alert\_function@{spi\_alert\_function}}
\index{spi\_alert\_function@{spi\_alert\_function}!scpi\_spi.c@{scpi\_spi.c}}
\doxysubsubsection{\texorpdfstring{spi\_alert\_function()}{spi\_alert\_function()}}
{\footnotesize\ttfamily int64\+\_\+t spi\+\_\+alert\+\_\+function (\begin{DoxyParamCaption}\item[{alarm\+\_\+id\+\_\+t}]{id,  }\item[{void $\ast$}]{user\+\_\+data }\end{DoxyParamCaption})}



Callback function triggered by an alarm to handle SPI timeout. 

This function is called when an SPI timeout occurs. It sets the global {\ttfamily spi\+\_\+timeout} flag to {\ttfamily true}, and if the SPI is enabled, it disables the SPI interface to prevent blocking operations. It can also perform additional tasks, such as configuring a GPIO pin.


\begin{DoxyParams}{Parameters}
{\em id} & Alarm ID that triggered the function. \\
\hline
{\em user\+\_\+data} & User-\/defined data passed to the callback (can be NULL if unused).\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int64\+\_\+t Return 0 to indicate no further alarms need to be triggered.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
This function is typically called by the system in response to an alarm, and it should return quickly to avoid blocking other operations. 
\end{DoxyNote}
\mbox{\Hypertarget{scpi__spi_8c_a23385f64b89a24238ba50379892ed47a}\label{scpi__spi_8c_a23385f64b89a24238ba50379892ed47a}} 
\index{scpi\_spi.c@{scpi\_spi.c}!spi\_bytes\_to\_words@{spi\_bytes\_to\_words}}
\index{spi\_bytes\_to\_words@{spi\_bytes\_to\_words}!scpi\_spi.c@{scpi\_spi.c}}
\doxysubsubsection{\texorpdfstring{spi\_bytes\_to\_words()}{spi\_bytes\_to\_words()}}
{\footnotesize\ttfamily void spi\+\_\+bytes\+\_\+to\+\_\+words (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{byte\+\_\+array,  }\item[{uint16\+\_\+t $\ast$}]{word\+\_\+array,  }\item[{size\+\_\+t}]{length }\end{DoxyParamCaption})}



function who transform an array of bytes to an array of words. 


\begin{DoxyParams}{Parameters}
{\em byte\+\_\+array} & pointer to the array of bytes to transform \\
\hline
{\em word\+\_\+array} & pointer to the array of the resulting word \\
\hline
{\em length} & length of the byte array \\
\hline
\end{DoxyParams}
\texorpdfstring{$<$}{<} transform 2 bytes in 1 word\mbox{\Hypertarget{scpi__spi_8c_a1a49534552d094cd1e724ab8940c035a}\label{scpi__spi_8c_a1a49534552d094cd1e724ab8940c035a}} 
\index{scpi\_spi.c@{scpi\_spi.c}!spi\_words\_to\_bytes@{spi\_words\_to\_bytes}}
\index{spi\_words\_to\_bytes@{spi\_words\_to\_bytes}!scpi\_spi.c@{scpi\_spi.c}}
\doxysubsubsection{\texorpdfstring{spi\_words\_to\_bytes()}{spi\_words\_to\_bytes()}}
{\footnotesize\ttfamily void spi\+\_\+words\+\_\+to\+\_\+bytes (\begin{DoxyParamCaption}\item[{uint16\+\_\+t $\ast$}]{word\+\_\+array,  }\item[{uint8\+\_\+t $\ast$}]{byte\+\_\+array,  }\item[{size\+\_\+t}]{length }\end{DoxyParamCaption})}



function who transform an array of word to an array of byte 


\begin{DoxyParams}{Parameters}
{\em word\+\_\+array} & pointer to the array of words to transform \\
\hline
{\em byte\+\_\+array} & pointer to the array of the resulting bytes \\
\hline
{\em length} & length of the word array \\
\hline
\end{DoxyParams}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{scpi__spi_8c_a4bb6e704374ee61be159c9dd4e5976b7}\label{scpi__spi_8c_a4bb6e704374ee61be159c9dd4e5976b7}} 
\index{scpi\_spi.c@{scpi\_spi.c}!spi\_timeout@{spi\_timeout}}
\index{spi\_timeout@{spi\_timeout}!scpi\_spi.c@{scpi\_spi.c}}
\doxysubsubsection{\texorpdfstring{spi\_timeout}{spi\_timeout}}
{\footnotesize\ttfamily bool spi\+\_\+timeout = false}



Global flag indicating whether an SPI timeout has occurred. 

This variable is set to {\ttfamily true} when an SPI timeout occurs and is used to trigger specific actions, such as disabling the SPI interface. \mbox{\Hypertarget{scpi__spi_8c_a44e7e147692731d6817d00c1a204c8ab}\label{scpi__spi_8c_a44e7e147692731d6817d00c1a204c8ab}} 
\index{scpi\_spi.c@{scpi\_spi.c}!uspi@{uspi}}
\index{uspi@{uspi}!scpi\_spi.c@{scpi\_spi.c}}
\doxysubsubsection{\texorpdfstring{uspi}{uspi}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structuser__spi}{user\+\_\+spi}} uspi}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{= \{}
\DoxyCodeLine{    \mbox{\hyperlink{scpi__spi_8h_ad92e1ad5fdc2ccbfa94c9a97e9731801}{DEF\_SPI\_USER}},      }
\DoxyCodeLine{    \mbox{\hyperlink{scpi__spi_8h_a5f89522e9b8c162a81770c882e871c8b}{DEF\_SPI\_BAUD}},      }
\DoxyCodeLine{    \mbox{\hyperlink{scpi__spi_8h_a28035e900f29737f2852f2039a51d39a}{DEF\_SPI\_DATABITS}},  }
\DoxyCodeLine{    \mbox{\hyperlink{scpi__spi_8h_a4217b55d3e322f9327e0fbda933ea696}{DEF\_SPI\_CS}},        }
\DoxyCodeLine{    \mbox{\hyperlink{scpi__spi_8h_aef40ff40f2561db8ae3f5242d9b82bf9}{DEF\_SPI\_MODE}},      }
\DoxyCodeLine{    \mbox{\hyperlink{scpi__spi_8h_a447f512aa83392f754224e14ebde3fd8}{DEF\_SPI\_STATUS}}     }
\DoxyCodeLine{\}}

\end{DoxyCode}


Global SPI configuration structure initialized with default values. 

This structure holds the default configuration for the SPI interface, including settings for baud rate, data bits, chip select, SPI mode, and status. 